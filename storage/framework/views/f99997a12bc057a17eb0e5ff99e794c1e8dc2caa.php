 <?php $__env->startSection('title'); ?> <?php echo e($title); ?> :: ##parent-placeholder-3c6de1b7dd91465d437ef415f94f36afc1fbc8a8## <?php $__env->stopSection(); ?> <?php $__env->startSection('page_class', 'sidebar-main-hidden '); ?> <?php $__env->startSection('styles'); ?> ##parent-placeholder-bf62280f159b1468fff0c96540f3989d41279669## <?php $__env->stopSection(); ?> <?php $__env->startSection('sidebar'); ?> ##parent-placeholder-19bd1503d9bad449304cc6b4e977b74bac6cc771## <?php echo $__env->make('app.user.helpdesk.tickets.layout.sidebar', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?> <?php $__env->stopSection(); ?> <?php $__env->startSection('main'); ?> <?php if(app('request')->input('create') === 'true'): ?> <div class="col-sm-12"> <div class="panel panel-flat"> <div class="panel-heading"> <h5 class="panel-title">Create a ticket</h5> <div class="heading-elements"> <ul class="icons-list"> <li><a data-action="collapse"></a></li> </ul> </div> </div> <div class="panel-body"> <?php if(Session::has('success')): ?> <div class="alert alert-success alert-dismissable"> <i class="fa fa-check-circle"></i> <button type="button" class="close" data-dismiss="alert" aria-hidden="true" style="position: relative;margin-right: 10px;">&times;</button> <?php echo Session::get('success'); ?> </div> <?php endif; ?> <?php echo Form::open(array('action' => 'user\Helpdesk\Ticket\TicketsController@store' , 'method' => 'post','class'=>'form-vertical ticketform ','data-parsley-validate'=>'true','role'=>'form') ); ?> <input type="hidden" name="_token" value="<?php echo e(csrf_token()); ?>" /> <div class="col-sm-8"> <div class="required form-group<?php echo e($errors->has('subject') ? ' has-error' : ''); ?>"> <?php echo Form::label('subject', trans("ticket.subject"), array('class' => 'control-label')); ?> <?php echo Form::text('subject', Input::old('subject'), ['class' => 'form-control','required' => 'required','data-parsley-required-message' => trans("ticket.subject")]); ?> </div> <div class="required form-group<?php echo e($errors->has('description') ? ' has-error' : ''); ?>"> <?php echo Form::label('description', trans("ticket.description"), array('class' => 'control-label')); ?> <?php echo Form::textarea('description', Input::old('description'), ['class' => 'form-control summernote','required' => 'required','data-parsley-required-message' => trans("ticket.description")]); ?> </div> <div class="required form-group<?php echo e($errors->has('type') ? ' has-error' : ''); ?>"> <?php echo Form::label('type', trans("ticket.type"), array('class' => 'control-label')); ?> <div class=""> <?php $__currentLoopData = $ticket_types; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $type): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?> <input type="radio" class="styled" name="type" value="<?php echo e($type->id); ?>">&nbsp; <?php echo e($type->name); ?> <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?> </div> </div> </div> <div class="col-sm-4"> <div class="required form-group<?php echo e($errors->has('priority') ? ' has-error' : ''); ?>"> <?php echo Form::label('priority', trans("ticket.priority"), array('class' => 'control-label')); ?> <select data-placeholder="Select a priority..." class="select-priority form-control" name="priority" id="priority" required="required" data-parsley-required-message="Please Select priority"> <optgroup label="Priorities"> <?php $__currentLoopData = $ticket_priorities; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $priority): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?> <option data-color="<?php echo e($priority->priority_color); ?>" value="<?php echo e($priority->id); ?>"><?php echo e($priority->priority); ?> </option> <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?> </optgroup> </select> </div> <div class="required form-group<?php echo e($errors->has('department') ? ' has-error' : ''); ?>"> <?php echo Form::label('department', trans("ticket.department"), array('class' => 'control-label')); ?> <select data-placeholder="Select a department..." class="select2 form-control" name="department" id="department" required="required" data-parsley-required-message="Please Select department"> <optgroup label="Departments"> <?php $__currentLoopData = $ticket_departments; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $department): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?> <option data-color="<?php echo e($department->name); ?>" value="<?php echo e($department->id); ?>"><?php echo e($department->name); ?> </option> <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?> </optgroup> </select> </div> <div class="required form-group<?php echo e($errors->has('category') ? ' has-error' : ''); ?>"> <?php echo Form::label('category', trans("ticket.category"), array('class' => 'control-label')); ?> <select data-placeholder="Select a category..." class="select2 form-control" name="category" id="category" required="required" data-parsley-required-message="Please Select category"> <optgroup label="category"> <?php $__currentLoopData = $ticket_categories; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $category): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?> <option data-color="<?php echo e($category->category); ?>" value="<?php echo e($category->id); ?>"><?php echo e($category->category); ?> </option> <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?> </optgroup> </select> </div> <div class="required form-group<?php echo e($errors->has('status') ? ' has-error' : ''); ?>"> <?php echo Form::label('status', trans("ticket.status"), array('class' => 'control-label')); ?> <select data-placeholder="Select a status..." class="select2 form-control" name="status" id="status" required="required" data-parsley-required-message="Please Select status"> <optgroup label="status"> <?php $__currentLoopData = $ticket_statuses; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $status): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?> <option data-color="<?php echo e($status->status); ?>" value="<?php echo e($status->id); ?>"><?php echo e($status->name); ?> </option> <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?> </optgroup> </select> </div> <div class="form-group"> <button type="submit" class="btn btn-primary submit-ticket"><b><i class=" icon-folder-plus2"></i></b> <?php echo e(trans('ticket_details.create_ticket')); ?></button> </div> </div> <?php echo Form::close(); ?> </div> </div> </div> <?php endif; ?> <div class="col-sm-12"> <div class="panel panel-flat"> <div class="panel-heading"> <h5 class="panel-title"> Tickets <?php if(app('request')->input('overdue') === 'on'): ?> - Overdue items <?php endif; ?> </h5> <div class="heading-elements"> <ul class="icons-list"> <li><a data-action="collapse"></a></li> </ul> </div> </div> <div class="panel-body"> <button type="button" class="btn btn-xs btn-primary text-white" id="filter" data-toggle="collapse" data-target="#filterticketpanel" title="Filter tickets"><i class="fa fa-filter"></i>&nbsp;</button> <?php echo $ticket_priorities->contains('priority',app('request')->input('priority')) ? ' <label class="label border-left-success label-striped"><i class="fa fa-flag"></i> Priority:&nbsp;'.app('request')->input('priority').'</label>' : ''; ?> <?php echo $ticket_statuses->contains('name',app('request')->input('status')) ? ' <label class="label border-left-success label-striped"><i class="fa fa-check"></i> Status:&nbsp;'.app('request')->input('status').'</label>' : ''; ?> <?php echo $ticket_categories->contains('category',app('request')->input('category')) ? ' <label class="label border-left-success label-striped"><i class="fa fa-tags"></i> Category:&nbsp;'.app('request')->input('category').'</label>' : ''; ?> <?php echo $ticket_departments->contains('name',app('request')->input('department')) ? ' <label class="label border-left-success label-striped"><i class="fa fa-building-o"></i> Department :&nbsp;'.app('request')->input('department').'</label>' : ''; ?> <div id="filterticketpanel" class="collapse"> <div class="panel panel-flat border-top-info border-bottom-info"> <div class="panel-body"> <form method="GET" action="<?php echo e(url('user/helpdesk/ticket')); ?>" accept-charset="UTF-8" class="form-horizontal" id="filter-form"> <input type="hidden" name="showtickets" value="showtickets"> <div class="row"> <div class="col-sm-3"> Department <select class="select2 filter form-control" name="department" id="departments-filter"> <option value="all" selected>All</option> <?php $__currentLoopData = $ticket_departments; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $department): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?> <option value="<?php echo e($department->name); ?>"><?php echo e($department->name); ?></option> <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?> </select> </div> <div class="col-sm-3"> Priority <select class="select2 filter form-control" name="priority" id="priorities-filter"> <option value="all" selected>All</option> <?php $__currentLoopData = $ticket_priorities; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $priority): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?> <option value="<?php echo e($priority->priority); ?>"><?php echo e($priority->priority); ?></option> <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?> </select> </div> <div class="col-sm-3"> Status <select class="select2 filter form-control" name="status" id="statuses-filter"> <option value="all" selected>All</option> <?php $__currentLoopData = $ticket_statuses; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $status): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?> <option value="<?php echo e($status->name); ?>"><?php echo e($status->name); ?></option> <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?> </select> </div> <div class="col-sm-3"> Category <select class="select2 filter form-control" name="category" id="categories-filter"> <option value="all" selected>All</option> <?php $__currentLoopData = $ticket_categories; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $category): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?> <option value="<?php echo e($category->category); ?>"><?php echo e($category->category); ?></option> <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?> </select> </div> </div> <br/> <div class="row"> <div class="col-sm-3"> Ticket ID <input class="form-control" id="ticket-number" name="ticket-number" /> </div> <div class="col-sm-3"> Owner <input type="text" class="form-control" id="key-word" name="key-word" placeholder="Search Member"> <input type="hidden" id="key_user_hidden" name="key_user_hidden"> </div> <div class="col-sm-3"> <label for="overduechooser">Show only overdue items</label> <input class="styled" id="overduechooser" type="checkbox" name="overdue"> </div> </div> <br/> <input id="apply-filter" class="btn btn-primary" type="submit" name="" value="Apply" onclick="removeEmptyValues()"> <input id="resetFilter" class="btn btn-default" type="reset" name="reset" value="Clear"> </form> </div> </div> </div> <table data-overdue="<?php echo e(app('request')->input('overdue') ? app('request')->input('overdue') : 'false'); ?>" data-priority="<?php echo e(app('request')->input('priority') ? app('request')->input('priority') : 'All'); ?>" data-department="<?php echo e(app('request')->input('department') ? app('request')->input('department') : 'All'); ?>" data-category="<?php echo e(app('request')->input('category') ? app('request')->input('category') : 'All'); ?>" data-status="<?php echo e(app('request')->input('status') ? app('request')->input('status') : 'All'); ?>" data-deleted="<?php echo e(app('request')->input('deleted') ? app('request')->input('deleted') : ''); ?>" class="table datatable-basic table-striped table-hover changestatuswrapper" id="user-ticket-table" data-search="false" > <thead> <tr> <th> <?php echo e(trans('tickets.ticket_number')); ?> </th> <th> <?php echo e(trans('tickets.ticket_from')); ?> </th> <th> <?php echo e(trans('tickets.subject')); ?> </th> <th> <?php echo e(trans('tickets.status')); ?> </th> <th> <?php echo e(trans('tickets.priority')); ?> </th> <th> <?php echo e(trans('tickets.department')); ?> </th> <th> <?php echo e(trans('tickets.actions')); ?> </th> </tr> </thead> <tbody> </tbody> </table> </div> </div> </div> <?php $__env->stopSection(); ?> <?php $__env->startSection('scripts'); ?> <?php $__env->stopSection(); ?>
<?php echo $__env->make('app.user.layouts.default', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>